(this["webpackJsonpmaster-lps"]=this["webpackJsonpmaster-lps"]||[]).push([[18],{741:function(e,a,t){"use strict";t.r(a);var n=t(180),l=t(67),s=t(68),r=t(70),c=t(69),i=t(1),o=t.n(i),m=t(14),u=t(707),d=t(44),h=(t(699),t(698),t(99)),p=t(71),E=t.n(p),g=function(e){Object(r.a)(t,e);var a=Object(c.a)(t);function t(e){var n;Object(l.a)(this,t),(n=a.call(this,e)).componentDidMount=function(){n.user_id&&(h.a.get("admin/page/pages").then((function(e){console.log(e),n.getCurrentPermission(e.data)})),h.a.get("admin/users/".concat(n.user_id)).then((function(e){console.log(e.data.data[0]),delete e.data.data[0].password;var a=e.data.data[0];n.setState({first_name:a.first_name||"",last_name:a.last_name||"",company_name:a.company_name||"",email:a.email||""})})))},n.state={loading:!1,first_name:"",last_name:"",company_name:"",email:"",password:"",password2:"",page_list:[]};var s=e.match.params._id;return parseInt(s)>0&&(n.user_id=s),console.log(n.user_id,e),n}return Object(s.a)(t,[{key:"getCurrentPermission",value:function(e){var a=this;h.a.post("admin/users/getPermission",{user_id:this.user_id}).then((function(t){t.data.forEach((function(a){var t=e.find((function(e){return e.id===a.page_id}));t&&(t.edit=a.edit,t.view=a.view,t.lead=a.lead)})),e=e.sort((function(e,a){return null!=e.view||null!=e.edit||null!=e.lead?-1:null!=a.view||null!=a.edit||null!=a.lead?1:0})),a.setState({page_list:e})}))}},{key:"onBack",value:function(){this.props.history.goBack()}},{key:"onInputChange",value:function(e,a){this.setState(Object(n.a)({},a,e.target.value))}},{key:"onFirstNameChange",value:function(e){this.setState({first_name:e.target.value})}},{key:"onLastNameChange",value:function(e){this.setState({last_name:e.target.value})}},{key:"onCompanyNameChange",value:function(e){this.setState({company_name:e.target.value})}},{key:"onEmailChange",value:function(e){this.setState({email:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"onPassword2Change",value:function(e){this.setState({password2:e.target.value})}},{key:"onTapRegister",value:function(){var e=this;this.setState({loading:!0});var a=this.state,t="users/signup";this.user_id&&(t="users/user-info",a.id=this.user_id),h.a.post(t,a).then((function(t){console.log(t.data),E()({title:null==a.id?"Successfully created.":"Successfully updated.",icon:"success",buttons:{confirm:{text:"OK",value:!0,visible:!0,className:"",closeModal:!0}}}).then((function(){e.props.history.goBack()})),e.setState({loading:!1})})).catch((function(a){console.log(a),e.setState({loading:!1})}))}},{key:"onTapPermission",value:function(){var e=this;this.setState({loading:!0});var a=this.state.page_list,t=[];a.forEach((function(a){(a.view||a.edit||a.lead)&&t.push({user_id:e.user_id,page_id:a.id,edit:a.edit,view:a.view,lead:a.lead})})),h.a.post("admin/users/addPermission",{user_id:this.user_id,user_page_list:t}).then((function(a){console.log(a.data),E()({title:"Successfully updated.",icon:"success",buttons:{confirm:{text:"OK",value:!0,visible:!0,className:"",closeModal:!0}}}).then((function(){e.props.history.goBack()})),e.setState({loading:!1})})).catch((function(a){console.log(a),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,a=this.state,t=a.loading,n=a.page_list;return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.e,null,o.a.createElement(m.h,null,this.user_id?"Edit User":"New User"),o.a.createElement(m.f,null,o.a.createElement(m.U,null,o.a.createElement(m.F,{variant:"tabs"},o.a.createElement(m.G,null,o.a.createElement(m.H,null,"Personal Information")),o.a.createElement(m.G,null,o.a.createElement(m.H,null,"Permission"))),o.a.createElement(m.S,null,o.a.createElement(m.T,null,o.a.createElement(m.k,{className:"p-4"},o.a.createElement(m.I,{className:"justify-content-center"},o.a.createElement(m.i,{md:"9",lg:"7",xl:"6"},o.a.createElement(m.e,{className:"mx-4"},o.a.createElement(m.f,{className:"p-4"},o.a.createElement(m.s,{className:"was-validated1 mt-1"},o.a.createElement(m.t,{row:!0,className:"my-0"},o.a.createElement(m.i,{xs:"6"},o.a.createElement(m.t,null,o.a.createElement(m.D,{htmlFor:"first_name"},"First Name"),o.a.createElement(m.y,{id:"first_name",placeholder:"First Name",value:this.state.first_name,onChange:function(a){return e.onInputChange(a,"first_name")}}))),o.a.createElement(m.i,{xs:"6"},o.a.createElement(m.t,null,o.a.createElement(m.D,{htmlFor:"last_name"},"Last Name"),o.a.createElement(m.y,{id:"last_name",placeholder:"Last Name",value:this.state.last_name,onChange:function(a){return e.onInputChange(a,"last_name")}})))),o.a.createElement(m.t,null,o.a.createElement(m.D,{htmlFor:"company_name"},"Company Name"),o.a.createElement(m.y,{id:"company_name",placeholder:"Enter Company Name",value:this.state.company_name,onChange:function(a){return e.onInputChange(a,"company_name")}})),o.a.createElement(m.t,null,o.a.createElement(m.D,{htmlFor:"email"},"Email"),o.a.createElement(m.y,{id:"email",placeholder:"Email",value:this.state.email,onChange:function(a){return e.onInputChange(a,"email")}})),o.a.createElement(m.z,{className:"mb-3"},o.a.createElement(m.B,null,o.a.createElement(m.C,null,o.a.createElement(d.a,{name:"cil-lock-locked"}))),o.a.createElement(m.y,{type:"password",placeholder:"Password",autoComplete:"new-password",value:this.state.password,onChange:function(a){return e.onPasswordChange(a)}})),o.a.createElement(m.z,{className:"mb-4"},o.a.createElement(m.B,null,o.a.createElement(m.C,null,o.a.createElement(d.a,{name:"cil-lock-locked"}))),o.a.createElement(m.y,{type:"password",placeholder:"Repeat password",autoComplete:"new-password",value:this.state.password2,onChange:function(a){return e.onPassword2Change(a)}})),o.a.createElement(m.d,{color:"success",block:!0,onClick:function(){e.onTapRegister()}},this.user_id?"Update Account":"Create Account",t&&o.a.createElement("span",{className:"spinner-border spinner-border-sm ml-1",role:"status","aria-hidden":"true"}))))))))),o.a.createElement(m.T,null,"Page List",o.a.createElement("table",{className:"table table-hover table-outline mb-0 d-none d-sm-table"},o.a.createElement("thead",{className:"thead-light"},o.a.createElement("tr",null,o.a.createElement("th",null,"Name"),o.a.createElement("th",{className:"text-right"},"Available Action"))),o.a.createElement("tbody",null,n.map((function(e){var a=u(new Date(e.createdAt)).format("DD MMMM YYYY");return o.a.createElement("tr",{key:e.id},o.a.createElement("td",null,o.a.createElement("div",null,e.title),o.a.createElement("div",{className:"small text-muted"},o.a.createElement("span",null,"New")," | Registered: ",a)),o.a.createElement("td",{className:"text-right"},o.a.createElement("div",{className:"d-flex justify-content-end"},o.a.createElement("div",{className:"col-61 text-center"},o.a.createElement("div",null,"View"),o.a.createElement(m.R,{className:"mx-1",color:"primary",defaultChecked:e.view,onChange:function(a){return e.view=a.target.checked}})),o.a.createElement("div",{className:"col-1s6 d-flex1 text-center"},o.a.createElement("div",null,"View Lead"),o.a.createElement(m.R,{className:"mx-1",color:"success",defaultChecked:e.lead,onChange:function(a){return e.lead=a.target.checked}})),o.a.createElement("div",{className:"col-1s6 d-flex1 text-center"},o.a.createElement("div",null,"Edit"),o.a.createElement(m.R,{className:"mx-1",color:"danger",defaultChecked:e.edit,onChange:function(a){return e.edit=a.target.checked}})))))})))),o.a.createElement(m.d,{color:"success",className:"mt-2",onClick:function(){e.onTapPermission()}},this.user_id?"Update Permisson":"Create Permisson",t&&o.a.createElement("span",{className:"spinner-border spinner-border-sm ml-1",role:"status","aria-hidden":"true"}))))))))}}]),t}(i.Component);a.default=g}}]);
//# sourceMappingURL=18.5e480f6a.chunk.js.map