(this["webpackJsonpmaster-lps"]=this["webpackJsonpmaster-lps"]||[]).push([[22],{727:function(e,t,a){"use strict";a.r(t);var n=a(67),l=a(68),c=a(70),i=a(69),r=a(1),o=a.n(r),s=a(14),u=a(71),m=a.n(u),d=a(44),p=a(707),E=a(99),h=a(416).default,f=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).componentDidMount=function(){E.a.get("admin/page/pages").then((function(e){console.log(e),l.setState({list:e.data})}))},l.state={list:[]},l}return Object(l.a)(a,[{key:"onExport",value:function(){window.open("".concat(h,"/admin/page/pages-export"),"_blank")}},{key:"onView",value:function(e){this.props.history.push("/view/".concat(e))}},{key:"onVisit",value:function(e){var t=h.replace("api/","");t=t.replace(":3008",""),console.log(t),window.open("".concat(t,"p/").concat(e.url),"_blank")}},{key:"onEdit",value:function(e){this.props.history.push("/edit/".concat(e))}},{key:"onHtmlEdit",value:function(e){this.props.history.push("/new-builder/".concat(e))}},{key:"onDelete",value:function(e){var t=this;m()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this page!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(a){a&&E.a.delete("admin/page/page/".concat(e.id)).then((function(a){console.log(a);var n=t.state.list;n=n.filter((function(t){return t.id!==e.id})),t.setState({list:n})}))}))}},{key:"onDownload",value:function(e){var t=h.replace("api/","");t=t.replace(":3008",""),console.log(t),window.open("".concat(h,"/admin/page/download-zip?page_id=").concat(e.id),"_blank")}},{key:"onDuplicate",value:function(e){var t=this;try{delete(e=JSON.parse(JSON.stringify(e))).id,e.url="Copy "+(new Date).getTime()+e.url,E.a.post("admin/page/add-page",e).then((function(e){console.log(e),t.props.history.push("/edit/".concat(e.data.id))}))}catch(a){console.log(a)}}},{key:"render",value:function(){var e=this,t=this.state.list;return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.I,null,o.a.createElement(s.i,null,o.a.createElement(s.e,null,o.a.createElement(s.h,null,"Page List",o.a.createElement("div",{className:"card-header-actions"},o.a.createElement(s.d,{type:"submit",size:"sm",color:"danger",onClick:function(){e.onExport()},className:"mr-2"},o.a.createElement(d.a,{name:"cil-scrubber"})," Export"))),o.a.createElement(s.f,null,o.a.createElement(s.d,{type:"submit",size:"sm",color:"warning",onClick:function(){e.props.history.push("/new")}},o.a.createElement(d.a,{name:"cil-scrubber"}),"Add"),o.a.createElement("br",null),o.a.createElement("table",{className:"table table-outline mb-0 d-none d-sm-table"},o.a.createElement("thead",{className:"thead-light"},o.a.createElement("tr",null,o.a.createElement("th",null,"Name"),o.a.createElement("th",{className:"text-center"},"Visit Number"),o.a.createElement("th",{className:"text-center"},"Assigened User"),o.a.createElement("th",{className:"text-right"},"View"))),o.a.createElement("tbody",null,t.map((function(t){var a=p(new Date(t.createdAt)).format("DD MMMM YYYY");return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,o.a.createElement("div",null,t.title),o.a.createElement("div",{className:"small text-muted"},0===t.visit?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"text-success"},"New")," | "):null," Created: ",a)),o.a.createElement("td",{className:"text-center"},t.visit),o.a.createElement("td",{className:"text-center"},null!=t.page_users&&t.page_users.length),o.a.createElement("td",{className:"text-right"},o.a.createElement(s.d,{color:"primary",size:"sm",className:"",variant:"outline",onClick:function(){return e.onVisit(t)}},"Visit"),o.a.createElement(s.d,{color:"success",size:"sm",className:"ml-1",variant:"outline",onClick:function(){return e.onView(t.id)}},"View"),o.a.createElement(s.d,{color:"success",size:"sm",className:"ml-1",variant:"outline",onClick:function(){return e.onDownload(t)}},"Download"),o.a.createElement(s.d,{color:"primary",size:"sm",className:"ml-1",variant:"outline",onClick:function(){return e.onEdit(t.id)}},"Edit"),o.a.createElement(s.d,{color:"primary",size:"sm",className:"ml-1",variant:"outline",onClick:function(){return e.onHtmlEdit(t.id)}},"Html Builder"),o.a.createElement(s.d,{color:"danger",size:"sm",className:"ml-1",variant:"outline",onClick:function(){return e.onDelete(t)}},"Delete"),o.a.createElement(s.d,{color:"info",size:"sm",className:"ml-1",variant:"outline",onClick:function(){return e.onDuplicate(t)}},"Duplicate")))})))))))))}}]),a}(r.Component);t.default=f}}]);
//# sourceMappingURL=22.9a3965e0.chunk.js.map