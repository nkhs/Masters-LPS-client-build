(this["webpackJsonpmaster-lps"]=this["webpackJsonpmaster-lps"]||[]).push([[25],{738:function(e,t,a){"use strict";a.r(t);var o=a(180),n=a(700),l=a.n(n),r=a(701),i=a(127),s=a(67),m=a(68),c=a(70),g=a(69),p=a(1),u=a.n(p),h=a(14),d=a(708),f=(a(704),a(44)),v=(a(699),a(698),a(99)),b=a(416).default,E={whatsapp:{max_wizard:2},"call-button":{max_wizard:2},"powered-by":{max_wizard:2}},C=[],y=function(e){Object(c.a)(a,e);var t=Object(g.a)(a);function a(e){var o;return Object(s.a)(this,a),(o=t.call(this,e)).componentDidMount=function(){v.a.get("admin/widget/widgets?title=".concat(o.state.title)).then((function(e){if(e&&e.data&&e.data[0]){var t=e.data[0];"string"===typeof t.options&&(t.options=JSON.parse(t.options));var a=JSON.parse(JSON.stringify(t.options));delete t.options,delete a.isLoading,o.setState(Object(i.a)(Object(i.a)(Object(i.a)({},t),a),{},{externel_links:C}))}}))},o.state={marginTop:0,marginBottom:0,paddingTop:14,paddingBottom:7,paddingLeft:7,paddingRight:7,height:50,align:"center",maxWidth:600,showColorSetting:!1,showPaddingSetting:!1,showLogoSetting:!0,background:"#000000",color:"#ffffff",opacity:1,company:"Powered By Master LPS",title:e.history.location.pathname.split("/").slice(-1).pop(),wizard_step:2,isLoading:!1,fontFamily:"BlinkMacSystemFont",logoSrc:null,logoWidth:20,logoHeight:100,logoPosition:"left",logoPositionX:"initial",logoPositionY:"initial",logoCroppedImageUrl:"https://img1.wsimg.com/isteam/ip/27dcd564-67cc-49d8-88f5-ecbd1ee7feb2/84278061_1335685009970771_8929805060758568960_.jpg/:/",logoCrop:{unit:"%",width:100,height:100}},o.ref=u.a.createRef(),o.javascript_ref=u.a.createRef(),o.css_ref=u.a.createRef(),o.logo_croper=null,o}return Object(m.a)(a,[{key:"_save",value:function(){var e=Object(r.a)(l.a.mark((function e(){var t,a,o,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.ref.current.innerHTML,a=this.javascript_ref.current.innerHTML,o=this.css_ref.current.innerHTML,v.a.post("admin/widget/add-widget",{title:this.state.title,html:t,css:o,js:a,externel_links:C,options:this.state}).then((function(e){console.log(e),n.props.history.goBack()})).catch((function(e){return console.error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(r.a)(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0}),this.logo_blob?((t=new FormData).append("file",this.logo_blob),v.a.post("".concat(b,"storage/upload"),t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.error(e.data),a.onLogoChanged(e.data[0].src,"logoCroppedImageUrl"),setTimeout((function(){a._save()}),2e3)}))):this._save();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"valueChange",value:function(e,t){this.setState(Object(o.a)({},t,e.target.value))}},{key:"getCroppedImg",value:function(e,t,a){var o=this,n=document.createElement("canvas");n.width=e.naturalWidth,n.height=e.naturalHeight;var l=e.naturalWidth/e.width,r=e.naturalHeight/e.height;return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(e,t.x*l,t.y*r,t.width*l,t.height*r,0,0,t.width,t.height),new Promise((function(e,t){n.toBlob((function(t){t?(t.name=a,window.URL.revokeObjectURL(o.fileUrl),o.logo_blob=t,o.fileUrl=window.URL.createObjectURL(t),e(o.fileUrl)):console.error("Canvas is empty")}),"image/png")}))}},{key:"onLogoChanged",value:function(e,t){this.setState(Object(o.a)({},t,e))}},{key:"onImageCropComplete",value:function(){var e=Object(r.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.logoImageRef&&t.width&&t.height)){e.next=6;break}return e.next=3,this.getCroppedImg(this.logoImageRef,t,"newFile.png");case 3:a=e.sent,console.error(a),this.onLogoChanged(a,"logoCroppedImageUrl");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readFile",value:function(e){var t=this,a=new FileReader;a.addEventListener("load",(function(){return t.onLogoChanged(a.result,"logoSrc")})),a.readAsDataURL(e.target.files[0])}},{key:"render",value:function(){var e=this,t=this.state.wizard_step;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-4 border-right"},u.a.createElement("div",{className:"d-flex1 wizard"},2===this.state.wizard_step&&u.a.createElement(u.a.Fragment,null,u.a.createElement("h4",null,"Powered By"),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Height"),u.a.createElement("input",{type:"number",value:this.state.height,className:"form-control",onChange:function(t){e.valueChange(t,"height")}})),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Company"),u.a.createElement("input",{type:"text",value:this.state.company,className:"form-control",placeholder:"Company",onChange:function(t){e.valueChange(t,"company")}})),u.a.createElement("div",{className:"form-group mt-31"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Font Family"),u.a.createElement("select",{value:this.state.fontFamily,className:"form-control",onChange:function(t){return e.valueChange(t,"fontFamily")}},u.a.createElement("option",null,"fantasy"),u.a.createElement("option",null,"fangsong"),u.a.createElement("option",null,"monospace"),u.a.createElement("option",null,"sans-serif"),u.a.createElement("option",null,"ui-serif"))),u.a.createElement(h.e,null,u.a.createElement(h.h,{onClick:function(){e.setState({showLogoSetting:!e.state.showLogoSetting})}},"Logo Setting"),u.a.createElement(h.j,{show:this.state.showLogoSetting},u.a.createElement(h.f,null,u.a.createElement("div",{className:"form-group mt-31"},u.a.createElement("label",{className:"form-label"},"Logo"),u.a.createElement("input",{className:"form-control-file",type:"file",accept:"image/*",onChange:function(t){return e.readFile(t)},onClick:function(e){return e.target.value=null}})),this.state.logoSrc&&u.a.createElement(d.a,{src:this.state.logoSrc,viewMode:1,guides:!1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,onInitialized:function(t){e.logo_croper=t},ready:function(){e.onLogoChanged(e.logo_croper.getCroppedCanvas().toDataURL(),"logoCroppedImageUrl"),e.logo_croper.getCroppedCanvas().toBlob((function(t){return e.logo_blob=t}))},cropend:function(){e.onLogoChanged(e.logo_croper.getCroppedCanvas().toDataURL(),"logoCroppedImageUrl"),e.logo_croper.getCroppedCanvas().toBlob((function(t){return e.logo_blob=t}))}}),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Logo Size"),u.a.createElement("input",{type:"number",value:this.state.logoWidth,className:"form-control",min:"0",max:"100",onChange:function(t){e.valueChange(t,"logoWidth")}}),u.a.createElement("input",{type:"number",value:this.state.logoHeight,className:"form-control mt-2",min:"0",max:"100",onChange:function(t){e.valueChange(t,"logoHeight")}})),u.a.createElement("div",{className:"form-group mt-31"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Position"),u.a.createElement("select",{value:this.state.logoPosition,className:"form-control",onChange:function(t){return e.valueChange(t,"logoPosition")}},u.a.createElement("option",null,"left"),u.a.createElement("option",null,"right"),u.a.createElement("option",null,"bottom"),u.a.createElement("option",null,"center"),u.a.createElement("option",null,"top"))),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Position (X, Y)"),u.a.createElement("input",{type:"number",value:this.state.logoPositionX,className:"form-control",onChange:function(t){e.valueChange(t,"logoPositionX")}}),u.a.createElement("input",{type:"number",value:this.state.logoPositionY,className:"form-control mt-2",onChange:function(t){e.valueChange(t,"logoPositionY")}}))))),u.a.createElement(h.e,null,u.a.createElement(h.h,{onClick:function(){e.setState({showColorSetting:!e.state.showColorSetting})}},"Color Setting"),u.a.createElement(h.j,{show:this.state.showColorSetting},u.a.createElement(h.f,null,u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Background Color"),u.a.createElement("input",{type:"color",value:this.state.background,className:"form-control",placeholder:"Background",onChange:function(t){e.valueChange(t,"background")}})),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Text Color"),u.a.createElement("input",{type:"color",value:this.state.color,className:"form-control",onChange:function(t){e.valueChange(t,"color")}})),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Opacity"),u.a.createElement("input",{type:"number",value:this.state.opacity,className:"form-control",min:"0",max:"1",step:"0.1",onChange:function(t){e.valueChange(t,"opacity")}}))))),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Margin Top"),u.a.createElement("input",{type:"number",value:this.state.marginTop,className:"form-control",onChange:function(t){e.valueChange(t,"marginTop")}})),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Margin Bottom"),u.a.createElement("input",{type:"number",value:this.state.marginBottom,className:"form-control",onChange:function(t){e.valueChange(t,"marginBottom")}})),u.a.createElement(h.e,null,u.a.createElement(h.h,{onClick:function(){e.setState({showPaddingSetting:!e.state.showPaddingSetting})}},"Padding Setting"),u.a.createElement(h.j,{show:this.state.showPaddingSetting},u.a.createElement(h.f,null,u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Top"),u.a.createElement("input",{type:"number",value:this.state.paddingTop,className:"form-control",min:"0",onChange:function(t){e.valueChange(t,"paddingTop")}})),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Bottom"),u.a.createElement("input",{type:"number",value:this.state.paddingBottom,className:"form-control",min:"0",onChange:function(t){e.valueChange(t,"paddingBottom")}})),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Left"),u.a.createElement("input",{type:"number",value:this.state.paddingLeft,className:"form-control",min:"0",onChange:function(t){e.valueChange(t,"paddingLeft")}})),u.a.createElement("div",{className:"form-group mt-3"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Right"),u.a.createElement("input",{type:"number",value:this.state.paddingRight,className:"form-control",min:"0",onChange:function(t){e.valueChange(t,"paddingRight")}}))))),u.a.createElement("div",{className:"form-group mt-31"},u.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Text Align"),u.a.createElement("select",{value:this.state.align,className:"form-control",onChange:function(t){e.valueChange(t,"align")}},u.a.createElement("option",{value:"center"},"Center"),u.a.createElement("option",{value:"right"},"Right"),u.a.createElement("option",{value:"left"},"Left")))),this.state.wizard_step<E[this.state.title].max_wizard&&u.a.createElement("button",{className:"btn btn-primary mt-5 float-right",onClick:function(){e.setState({wizard_step:t+1})},disabled:2===this.state.wizard_step},"Next"),this.state.wizard_step===E[this.state.title].max_wizard&&u.a.createElement(u.a.Fragment,null,u.a.createElement(h.d,{className:"mt-5 float-right",type:"submit",size:"sm",color:"primary",onClick:function(){e.onSave()}},u.a.createElement(f.a,{name:"cil-scrubber"}),"Save",this.state.isLoading&&u.a.createElement("span",{className:"spinner-border spinner-border-sm ml-1",role:"status","aria-hidden":"true"}))))),u.a.createElement("div",{className:"col-8"},u.a.createElement("h4",{className:"text-center"},"Live Preview"),u.a.createElement("div",{className:"border pb-5"},u.a.createElement("div",{ref:this.ref,style:{background:this.state.background,opacity:this.state.opacity,color:this.state.color,textAlign:this.state.align,fontFamily:this.state.fontFamily,margin:"auto",marginTop:this.state.marginTop+"px",marginBottom:this.state.marginBottom+"px",paddingTop:this.state.paddingTop+"px",paddingBottom:this.state.paddingBottom+"px",paddingLeft:this.state.paddingLeft+"px",paddingRight:this.state.paddingRight+"px",height:this.state.height+"px",backgroundImage:"url(".concat(this.state.logoCroppedImageUrl,")"),backgroundSize:"".concat(this.state.logoWidth,"% ").concat(this.state.logoHeight,"%"),backgroundRepeat:"no-repeat",backgroundPosition:this.state.logoPosition,backgroundPositionX:this.state.logoPositionX+"px",backgroundPositionY:this.state.logoPositionY+"px"}},u.a.createElement("span",{style:{}},this.state.company))),u.a.createElement("pre",{ref:this.javascript_ref,style:{display:"none"}}),u.a.createElement("pre",{ref:this.css_ref,style:{display:"none"}}))))}}]),a}(p.Component);t.default=y}}]);
//# sourceMappingURL=25.7d6d85e8.chunk.js.map