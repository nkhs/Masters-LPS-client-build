(this["webpackJsonpmaster-lps"]=this["webpackJsonpmaster-lps"]||[]).push([[6],{700:function(e,t,a){e.exports=a(417)},701:function(e,t,a){"use strict";function n(e,t,a,n,r,i,s){try{var o=e[i](s),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,l,"next",e)}function l(e){n(s,r,i,o,l,"throw",e)}o(void 0)}))}}a.d(t,"a",(function(){return r}))},702:function(e,t,a){},703:function(e,t,a){},704:function(e,t,a){},706:function(e,t,a){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a.d(t,"a",(function(){return r}))},735:function(e,t,a){"use strict";a.r(t);var n=a(700),r=a.n(n),i=a(701),s=a(127),o=a(180),l=a(706),c=a(67),p=a(68),m=a(70),u=a(69),h=a(1),d=a.n(h),g=a(14),f=a(44),b=(a(699),a(698),a(704),a(702),a(703),a(99)),v=(a(71),a(416).default),w={whatsapp:{max_wizard:2},"call button":{max_wizard:2},coming_soon:{max_wizard:8}},_=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.initWhatsapp(),n.pageId&&b.a.get("admin/page/pages?id=".concat(n.pageId)).then((function(e){n.setState({page:e.data[0],title:e.data[0].title})}))},n.state={page_type:e.history.location.pathname.split("/").slice(-1).pop(),phone_number:"4418642583168",title:"",color:"#F36923",call_to_action:"2",middleText:"Input Text",middleFontFamily:"BlinkMacSystemFont",buttonFontFamily:"BlinkMacSystemFont",middleTextColor:"#000000",middleTextFontSize:20,bottomColor:"#000000",buttonTextSize:16,borderBottomStyle:"solid",borderBottomWidth:5,formBackground:"#ED6D04",nameText:"\u0627\u0644\u0631\u062c\u0627\u0621 \u0643\u062a\u0627\u0628\u0629 \u0627\u0644\u0627\u0633\u0645",emailText:"\u0627\u0644\u0631\u062c\u0627\u0621 \u0643\u062a\u0627\u0628\u0629 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641l",buttonBackground:"#0081B8",buttonColor:"#ffffff",submitButtonBackground:"http://masters-lps.com/api/storage/storage/1606788159723_btn2.png",buttonText:"",wizard_step:2,isLoading:!1,actionURL:"".concat(v,"contract_record/add-contract-record"),whatsapp_title:"Chat with us on WhatsApp!",whatsapp_popup_message:"Hello, how can we help you?",whatsapp_position:"right",crop:{unit:"%",width:100,height:100},croppedImageUrl:null,src:null,imageList:[{marginTop:0,image_url:"http://masters-lps.com/api/storage/storage/1606411516123_basic.jpg",croppedImageUrl:"http://masters-lps.com/api/storage/storage/1606411516123_basic.jpg",crop:{unit:"%",width:100,height:100}}],callImage:"http://masters-lps.com/api/storage/storage/1606787142857_p2-b.png",callButtonImage:"https://camo.githubusercontent.com/a7adc13f08aa0ffc347db141a7c6b17e5ca99972f393cc5d24ece4b185135168/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2d57686174736170702d3443413134333f7374796c653d666c6174737175617265266c6162656c436f6c6f723d344341313433266c6f676f3d7768617473617070266c6f676f436f6c6f723d7768697465266c696e6b3d68747470733a2f2f6170692e77686174736170702e636f6d2f73656e643f70686f6e653d38363138363432353833313638",callPhone:"073-7958888",footerList:[]},n.imageList=[],n.footerList=[],n.imageList_cropper=[],n.blob_imageList=[],n.blob_footerList=[],n.pageId=e.match.params._id,n.lead_id=e.match.params._lead_id,n.ref=d.a.createRef(),n}return Object(p.a)(a,[{key:"addImage",value:function(e){var t="http://masters-lps.com/api/storage/storage/1606411516123_basic.jpg";"imageList"!==e&&(t="http://masters-lps.com/api/storage/storage/1606345081409_footer.png"),this.setState(Object(o.a)({},e,[].concat(Object(l.a)(this.state[e]),[{marginTop:0,image_url:t,croppedImageUrl:t,crop:{unit:"%",width:100,height:100}}])))}},{key:"removeImage",value:function(e,t){var a=Object(l.a)(this.state[e]);a.splice(t,1),this.setState(Object(o.a)({},e,a))}},{key:"onImageListChanged",value:function(e,t,a,n){var r=Object(l.a)(this.state[e]);r.splice(t,1,Object(s.a)(Object(s.a)({},this.state[e][t]),{},Object(o.a)({},n,a))),this.setState(Object(o.a)({},e,r))}},{key:"onImageCropComplete",value:function(){var e=Object(i.a)(r.a.mark((function e(t,a,n){var i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=this[t][a])&&n.width&&n.height)){e.next=6;break}return e.next=4,this.getCroppedImg(t,a,i,n,"newFile.png");case 4:s=e.sent,this.onImageListChanged(t,a,s,"croppedImageUrl");case 6:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"readFile",value:function(e,t,a){var n=this,r=new FileReader;r.addEventListener("load",(function(){return n.onImageListChanged(e,t,r.result,"src")})),r.readAsDataURL(a.target.files[0])}},{key:"readActionImageFile",value:function(e,t){var a=this,n=new FileReader;this[t]=e.target.files[0],n.addEventListener("load",(function(){return a.setState(Object(o.a)({},t,n.result))})),n.readAsDataURL(e.target.files[0])}},{key:"initWhatsapp",value:function(){var e=window.$;e("#WAButton").html(""),e("#WAButton").floatingWhatsApp({phone:this.state.phone_number,headerTitle:this.state.whatsapp_title,popupMessage:this.state.whatsapp_popup_message,showPopup:!0,buttonImage:'<img src="https://rawcdn.githack.com/rafaelbotazini/floating-whatsapp/3d18b26d5c7d430a1ab0b664f8ca6b69014aed68/whatsapp.svg" />',position:this.state.whatsapp_position})}},{key:"_save",value:function(){var e=Object(i.a)(r.a.mark((function e(){var t,a,n,i,s,o,l,c,p,m,u,h=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.isLoading=!0,!this.callImage){e.next=8;break}return(t=new FormData).append("file",this.callImage),e.next=6,b.a.post("".concat(v,"storage/upload"),t,{headers:{"Content-Type":"multipart/form-data"}});case 6:a=e.sent,this.setState({callImage:a.data[0].src});case 8:if(!this.callButtonImage){e.next=15;break}return(t=new FormData).append("file",this.callButtonImage),e.next=13,b.a.post("".concat(v,"storage/upload"),t,{headers:{"Content-Type":"multipart/form-data"}});case 13:n=e.sent,this.setState({callButtonImageRes:n.data[0].src});case 15:return i=this.blob_imageList.map((function(e){var t=new FormData;return t.append("file",e),b.a.post("".concat(v,"storage/upload"),t,{headers:{"Content-Type":"multipart/form-data"}})})),s=this.blob_footerList.map((function(e){var t=new FormData;return t.append("file",e),b.a.post("".concat(v,"storage/upload"),t,{headers:{"Content-Type":"multipart/form-data"}})})),e.next=19,Promise.all(i);case 19:return o=e.sent,this.blob_imageList=[],o.forEach((function(e,t){h.onImageListChanged("imageList",t,e.data[0].src,"croppedImageUrl")})),e.next=24,Promise.all(s);case 24:o=e.sent,this.blob_footerList=[],o.forEach((function(e,t){h.onImageListChanged("footerList",t,e.data[0].src,"croppedImageUrl")})),l=this.ref.current.innerHTML,c=this.state,p=c.url,m=c.title,u=c.page,b.a.post("admin/page/add-page",{id:u?u.id:null,url:p,html:l,css:"",title:m}).then((function(e){console.log(e),h.props.history.push("/new-builder/".concat(e.data.id))})).catch((function(e){return console.error(e)}));case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._save();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"valueChange",value:function(e,t){this.setState(Object(o.a)({},t,e.target.value))}},{key:"getCroppedImg",value:function(e,t,a,n,r){var i=this,s=document.createElement("canvas");s.width=a.naturalWidth,s.height=a.naturalHeight;var o=a.naturalWidth/a.width,l=a.naturalHeight/a.height;return s.width=n.width,s.height=n.height,s.getContext("2d").drawImage(a,n.x*o,n.y*l,n.width*o,n.height*l,0,0,n.width,n.height),new Promise((function(a,n){s.toBlob((function(n){n?(n.name=r,window.URL.revokeObjectURL(i.fileUrl),i["blob_".concat(e)][t]=n,i.fileUrl=window.URL.createObjectURL(n),a(i.fileUrl)):console.error("Canvas is empty")}),"image/png")}))}},{key:"render",value:function(){var e=this,t=this.state.wizard_step;return d.a.createElement(d.a.Fragment,null,d.a.createElement(g.I,null,d.a.createElement(g.i,null,d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-4 border-right"},d.a.createElement("div",{className:"d-flex1 wizard"},1===this.state.wizard_step&&d.a.createElement(d.a.Fragment,null,d.a.createElement("h4",null,"Choose Landing Page Type"),d.a.createElement("div",{onChange:function(t){e.setState({page_type:t.target.value})}},d.a.createElement("div",{className:"form-check"},d.a.createElement("input",{className:"form-check-input",type:"radio",name:"exampleRadios",id:"r1",value:"basic",defaultChecked:"basic"===this.state.page_type}),d.a.createElement("label",{className:"form-check-label",htmlFor:"r1"},"Basic")),d.a.createElement("div",{className:"form-check"},d.a.createElement("input",{className:"form-check-input",type:"radio",name:"exampleRadios",id:"r2",value:"basic_plus",defaultChecked:"basic_plus"===this.state.page_type}),d.a.createElement("label",{className:"form-check-label",htmlFor:"r2"},"Basic Plus")),d.a.createElement("div",{className:"form-check"},d.a.createElement("input",{className:"form-check-input",type:"radio",name:"exampleRadios",id:"r3",value:"coming_soon",defaultChecked:"coming_soon"===this.state.page_type}),d.a.createElement("label",{className:"form-check-label",htmlFor:"r3"},"Coming Soon")))),2===this.state.wizard_step&&d.a.createElement(d.a.Fragment,null,d.a.createElement("h4",null,"Widget Setting"),d.a.createElement("div",{className:"form-group mt-3"},d.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Phone Number"),d.a.createElement("input",{type:"text",value:this.state.phone_number,className:"form-control",placeholder:"phone number",onChange:function(t){e.valueChange(t,"phone_number"),e.initWhatsapp()}})),d.a.createElement("div",{className:"form-group mt-3"},d.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Title"),d.a.createElement("input",{type:"text",value:this.state.whatsapp_title,className:"form-control",placeholder:"Title",onChange:function(t){e.valueChange(t,"whatsapp_title"),e.initWhatsapp()}})),d.a.createElement("div",{className:"form-group mt-3"},d.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Title"),d.a.createElement("input",{type:"text",value:this.state.whatsapp_popup_message,className:"form-control",placeholder:"Title",onChange:function(t){e.valueChange(t,"whatsapp_popup_message"),e.initWhatsapp()}})),d.a.createElement("div",{className:"form-group mt-31"},d.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Font Family"),d.a.createElement("select",{value:this.state.whatsapp_position,className:"form-control",onChange:function(t){e.valueChange(t,"whatsapp_position"),e.initWhatsapp()}},d.a.createElement("option",{value:"left"},"Left"),d.a.createElement("option",{value:"right"},"Right")))),t>2&&d.a.createElement("button",{className:"btn btn-success mt-5 ",onClick:function(){e.setState({wizard_step:t-1})}},"Back"),this.state.wizard_step<w[this.state.page_type].max_wizard&&d.a.createElement("button",{className:"btn btn-primary mt-5 float-right",onClick:function(){e.setState({wizard_step:t+1})},disabled:2===this.state.wizard_step},"Next"),this.state.wizard_step===w[this.state.page_type].max_wizard&&d.a.createElement(d.a.Fragment,null,d.a.createElement(g.d,{className:"mt-5 float-right",type:"submit",size:"sm",color:"primary",onClick:function(){e.onSave()}},d.a.createElement(f.a,{name:"cil-scrubber"})," Save",this.state.isLoading&&d.a.createElement("span",{className:"spinner-border spinner-border-sm ml-1",role:"status","aria-hidden":"true"}))))),d.a.createElement("div",{className:"col-8"},d.a.createElement("h4",{className:"text-center"},"Live Preview"),d.a.createElement("div",{className:"border pb-5",ref:this.ref},"whatsapp"===this.state.page_type&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{style:{minHeight:"300px"}},d.a.createElement("div",{id:"WAButton",style:{position:"absolute"}}))),"call button"===this.state.page_type&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"phone-no-images",style:{width:"100%",maxWidth:"480px",textAlign:"center",margin:"auto",marginTop:"20px"}},d.a.createElement("a",{href:"tel:"+this.state.phone_number},d.a.createElement("div",{style:{position:"relative",height:"140px"}},d.a.createElement("svg",{style:{position:"absolute",top:"0px",left:"0px"},enableBackground:"new 0 0 140 140",height:"140px",id:"Layer_1",version:"1.1",viewBox:"0 0 40 40",width:"140px",space:"preserve",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},d.a.createElement("g",null,d.a.createElement("g",null,d.a.createElement("g",null,d.a.createElement("g",null,d.a.createElement("path",{fill:"#4DCC00",d:"M20,2c9.925,0,18,8.075,18,18s-8.075,18-18,18c-9.925,0-18-8.075-18-18S10.075,2,20,2 M20,0 C8.955,0,0,8.954,0,20c0,11.047,8.955,20,20,20c11.047,0,20-8.953,20-20C40,8.954,31.047,0,20,0L20,0z"})))),d.a.createElement("path",{fill:"#4DCC00",fillRule:"evenodd",clipRule:"evenodd",d:"M14.371,9.793c1.207-0.228,1.998,1.133,2.6,2.072   c0.586,0.912,1.307,1.982,1.016,3.169c-0.162,0.666-0.764,1.029-1.219,1.422c-0.449,0.388-1.133,0.744-1.299,1.34   c-0.271,0.967,0.322,1.982,0.689,2.56c0.834,1.306,1.842,2.483,3.129,3.534c0.623,0.51,1.488,1.191,2.355,1.016   c1.295-0.262,1.637-1.859,3.047-2.072c1.342-0.203,2.25,0.77,3.008,1.422c0.73,0.631,1.908,1.439,1.828,2.52   c-0.047,0.621-0.545,1.006-0.977,1.381c-0.439,0.383-0.824,0.813-1.258,1.096c-1.051,0.686-2.34,1.022-3.82,0.976   c-1.451-0.045-2.607-0.538-3.656-1.097c-2.051-1.094-3.672-2.633-5.199-4.348c-1.502-1.686-2.889-3.682-3.656-5.889   c-0.957-2.756-0.451-5.587,1.098-7.353c0.262-0.3,0.676-0.613,1.055-0.935C13.49,10.284,13.84,9.893,14.371,9.793z"}))),d.a.createElement("div",{className:"element"})))))))))))}}]),a}(h.Component);t.default=_}}]);
//# sourceMappingURL=6.0e06aea3.chunk.js.map