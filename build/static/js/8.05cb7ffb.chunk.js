(this["webpackJsonpmaster-lps"]=this["webpackJsonpmaster-lps"]||[]).push([[8],{702:function(e,t,a){},703:function(e,t,a){},706:function(e,t,a){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a.d(t,"a",(function(){return r}))},731:function(e,t,a){"use strict";a.r(t);var n=a(700),r=a.n(n),o=a(701),i=a(127),l=a(180),s=a(706),c=a(67),m=a(68),p=a(70),u=a(69),d=a(1),g=a.n(d),h=a(14),f=a(44),b=(a(699),a(698),a(708)),_=(a(704),a(705),a(702),a(703),a(99)),v=a(71),x=a.n(v),E=a(710),y=a(416).default,w={basic:{max_wizard:6},basic_plus:{max_wizard:8},coming_soon:{max_wizard:2},coming_soon2:{max_wizard:6}},C=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.pageId&&_.a.get("admin/page/pages?id=".concat(n.pageId)).then((function(e){n.setState({page:e.data[0],title:e.data[0].title,description:e.data[0].description,keywords:e.data[0].keywords,url:e.data[0].url,facebook_pixel:e.data[0].facebook_pixel,google_analytics:e.data[0].google_analytics})}))},console.log(),n.state={page_type:e.history.location.pathname.split("/").slice(-1).pop(),url:(new Date).getTime(),title:"",description:"Description",keywords:"Keywords",facebook_pixel:"946061702198384",google_analytics:"",color:"#F36923",buttonFontFamily:"BlinkMacSystemFont",buttonTextSize:16,emailText:"Be the first to know. Enter your email",buttonBackground:"#000000",buttonColor:"#ffffff",submitButtonBackground:"http://masters-lps.com/api/storage/storage/1606788159723_btn2.png",buttonText:"Notify Me!",wizard_step:2,isLoading:!1,actionURL:"".concat(y,"contract_record/add-contract-record"),crop:{unit:"%",width:100,height:100},croppedImageUrl:null,src:null,imageList:[{marginTop:0,image_url:"https://img1.wsimg.com/isteam/ip/27dcd564-67cc-49d8-88f5-ecbd1ee7feb2/84278061_1335685009970771_8929805060758568960_.jpg/:/",croppedImageUrl:"https://img1.wsimg.com/isteam/ip/27dcd564-67cc-49d8-88f5-ecbd1ee7feb2/84278061_1335685009970771_8929805060758568960_.jpg/:/",crop:{unit:"%",width:100,height:100}}],callImage:"http://masters-lps.com/api/storage/storage/1606787142857_p2-b.png",callButtonImage:"http://masters-lps.com/api/storage/storage/1606787670565_phone.png",callPhone:"073-7958888",footerList:[],head_title:"\u0645\u0646\u0635\u0648\u0631 \u0639\u0628\u0627\u0633 - Mansour Abas",coming_soon_font:"Yellowtail",coming_soon_color:"#1B1B1B",coming_soon_size:25,footerBackground:"#000000",footerTextColor:"#ffffff",aboutText:"About Mansour",aboutDescription:"Mansour Abbas Member of the  Knesset",contractTitle:"Be in Touch",contractAddress:"500 Terry Francois Street San Francisco, CA",contractDetail:"Email: info@mysite.com / Tel: 123-456-7890 / Fax: 123-456-7890",button_link:"https://facebook.com/test",fontList:["Yellowtail","fantasy","fangsong","monospace","sans-serif","ui-serif"],widgetHTML:"",widgetJS:"",widgetCSS:"",widgetExternel:[]},n.imageList=[],n.footerList=[],n.imageList_cropper=[],n.blob_imageList=[],n.blob_footerList=[],n.widget_blob_list=[],n.pageId=e.match.params._id,n.lead_id=e.match.params._lead_id,n.ref=g.a.createRef(),n.widget_ref=g.a.createRef(),n}return Object(m.a)(a,[{key:"addImage",value:function(e){var t="http://masters-lps.com/api/storage/storage/1606411516123_basic.jpg";"imageList"!==e&&(t="http://masters-lps.com/api/storage/storage/1606345081409_footer.png"),this.setState(Object(l.a)({},e,[].concat(Object(s.a)(this.state[e]),[{marginTop:0,image_url:t,croppedImageUrl:t,crop:{unit:"%",width:100,height:100}}])))}},{key:"removeImage",value:function(e,t){var a=Object(s.a)(this.state[e]);a.splice(t,1),this.setState(Object(l.a)({},e,a))}},{key:"onImageListChanged",value:function(e,t,a,n){var r=Object(s.a)(this.state[e]);r.splice(t,1,Object(i.a)(Object(i.a)({},this.state[e][t]),{},Object(l.a)({},n,a))),this.setState(Object(l.a)({},e,r))}},{key:"onImageCropComplete",value:function(){var e=Object(o.a)(r.a.mark((function e(t,a,n){var o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((o=this[t][a])&&n.width&&n.height)){e.next=6;break}return e.next=4,this.getCroppedImg(t,a,o,n,"newFile.png");case 4:i=e.sent,this.onImageListChanged(t,a,i,"croppedImageUrl");case 6:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"readFile",value:function(e,t,a){var n=this,r=new FileReader;r.addEventListener("load",(function(){return n.onImageListChanged(e,t,r.result,"src")})),r.readAsDataURL(a.target.files[0])}},{key:"readActionImageFile",value:function(e,t){var a=this,n=new FileReader;this[t]=e.target.files[0],n.addEventListener("load",(function(){return a.setState(Object(l.a)({},t,n.result))})),n.readAsDataURL(e.target.files[0])}},{key:"_save",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o,i,l,s,c,m,p,u,d,g,h,f,b,v=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.isLoading=!0,!this.widget_ref||!this.widget_ref.current){e.next=15;break}return t=this.widget_blob_list.map((function(e){var t=new FormData;return t.append("file",e.blob),_.a.post("".concat(y,"storage/upload"),t,{headers:{"Content-Type":"multipart/form-data"}})})),e.next=5,Promise.all(t);case 5:a=e.sent,n=0;case 7:if(!(n<a.length)){e.next=15;break}return o=a[n],console.log(o.data[0].src,this.widget_blob_list[n].column),e.next=12,this.widget_ref.current.updateState(o.data[0].src,this.widget_blob_list[n].column);case 12:n++,e.next=7;break;case 15:return i=this.blob_imageList.map((function(e){var t=new FormData;return t.append("file",e),_.a.post("".concat(y,"storage/upload"),t,{headers:{"Content-Type":"multipart/form-data"}})})),l=this.blob_footerList.map((function(e){var t=new FormData;return t.append("file",e),_.a.post("".concat(y,"storage/upload"),t,{headers:{"Content-Type":"multipart/form-data"}})})),e.next=19,Promise.all(i);case 19:return a=e.sent,this.blob_imageList=[],a.forEach((function(e,t){v.onImageListChanged("imageList",t,e.data[0].src,"croppedImageUrl")})),e.next=24,Promise.all(l);case 24:a=e.sent,this.blob_footerList=[],a.forEach((function(e,t){v.onImageListChanged("footerList",t,e.data[0].src,"croppedImageUrl")})),s=this.ref.current.innerHTML,c=this.state.widgetExternel,m=this.state.widgetCSS,p=this.state.widgetJS,s=s.deentitize(),p=p.deentitize(),m=m.deentitize(),u=this.state,d=u.url,g=u.title,h=u.page,f=u.description,b=u.keywords,_.a.post("admin/page/add-page",{id:h?h.id:null,url:d,html:s,css:m,js:p,title:g,description:f,keywords:b,lead_id:this.lead_id,facebook_pixel:this.state.facebook_pixel,google_analytics:this.state.google_analytics,externel_links:c}).then((function(e){console.log(e),v.props.history.push("/new-builder/".concat(e.data.id))})).catch((function(e){return console.error(e)}));case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSave",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n,o=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.state.url&&0!==this.state.url.length){e.next=4;break}return x()({title:"Input page url",icon:"error",buttons:{confirm:{text:"OK",value:!0,visible:!0,className:"",closeModal:!0}}}),this.setState({wizard_step:2}),e.abrupt("return");case 4:t=this.state,a=t.url,n=t.page,_.a.post("admin/page/check-page-url",{id:n?n.id:null,url:a}).then((function(e){if(null==e.data.data)return o._save();x()({title:"Please input other url",icon:"error",buttons:{confirm:{text:"OK",value:!0,visible:!0,className:"",closeModal:!0}}})})).catch((function(e){console.error(e),x()({title:"Error occur, Please input other url",icon:"error",buttons:{confirm:{text:"OK",value:!0,visible:!0,className:"",closeModal:!0}}}),o.setState({wizard_step:2})}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"valueChange",value:function(e,t){this.setState(Object(l.a)({},t,e.target.value))}},{key:"getCroppedImg",value:function(e,t,a,n,r){var o=this,i=document.createElement("canvas");i.width=a.naturalWidth,i.height=a.naturalHeight;var l=a.naturalWidth/a.width,s=a.naturalHeight/a.height;return i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(a,n.x*l,n.y*s,n.width*l,n.height*s,0,0,n.width,n.height),new Promise((function(a,n){i.toBlob((function(n){n?(n.name=r,window.URL.revokeObjectURL(o.fileUrl),o["blob_".concat(e)][t]=n,o.fileUrl=window.URL.createObjectURL(n),a(o.fileUrl)):console.error("Canvas is empty")}),"image/png")}))}},{key:"render",value:function(){var e=this,t=this.state.wizard_step;return g.a.createElement(g.a.Fragment,null,g.a.createElement(h.I,null,g.a.createElement(h.i,null,g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-4 border-right"},g.a.createElement("div",{className:"d-flex1 wizard"},1===this.state.wizard_step&&g.a.createElement(g.a.Fragment,null,g.a.createElement("h4",null,"Choose Landing Page Type"),g.a.createElement("div",{onChange:function(t){e.setState({page_type:t.target.value})}},g.a.createElement("div",{className:"form-check"},g.a.createElement("input",{className:"form-check-input",type:"radio",name:"exampleRadios",id:"r1",value:"basic",defaultChecked:"basic"===this.state.page_type}),g.a.createElement("label",{className:"form-check-label",htmlFor:"r1"},"Basic")),g.a.createElement("div",{className:"form-check"},g.a.createElement("input",{className:"form-check-input",type:"radio",name:"exampleRadios",id:"r2",value:"basic_plus",defaultChecked:"basic_plus"===this.state.page_type}),g.a.createElement("label",{className:"form-check-label",htmlFor:"r2"},"Basic Plus")),g.a.createElement("div",{className:"form-check"},g.a.createElement("input",{className:"form-check-input",type:"radio",name:"exampleRadios",id:"r3",value:"coming_soon",defaultChecked:"coming_soon"===this.state.page_type}),g.a.createElement("label",{className:"form-check-label",htmlFor:"r3"},"Coming Soon")))),2===this.state.wizard_step&&g.a.createElement(g.a.Fragment,null,g.a.createElement("h4",null,"Page Details"),g.a.createElement("div",{className:"form-group mt-3"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Page Url"),g.a.createElement("input",{type:"text",value:this.state.url,className:"form-control",placeholder:"Url",onChange:function(t){return e.valueChange(t,"url")}})),g.a.createElement("div",{className:"form-group mt-3"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Title"),g.a.createElement("input",{type:"text",value:this.state.title,className:"form-control",placeholder:"Title",onChange:function(t){return e.valueChange(t,"title")}})),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Description"),g.a.createElement("input",{type:"text",value:this.state.description,className:"form-control",placeholder:"Description",onChange:function(t){return e.valueChange(t,"description")}})),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Keywords"),g.a.createElement("input",{type:"text",value:this.state.keywords,className:"form-control",placeholder:"Keywords",onChange:function(t){return e.valueChange(t,"keywords")}})),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"FaceBook Pixel Code"),g.a.createElement("input",{type:"text",value:this.state.facebook_pixel,className:"form-control",placeholder:"Facebook pixel code",onChange:function(t){return e.valueChange(t,"facebook_pixel")}})),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Google Analytics"),g.a.createElement("input",{type:"text",value:this.state.google_analytics,className:"form-control",placeholder:"Google Analytics",onChange:function(t){return e.valueChange(t,"google_analytics")}}))),3===this.state.wizard_step&&g.a.createElement(g.a.Fragment,null,g.a.createElement("h4",null,"Welcome"),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Text"),g.a.createElement("input",{type:"text",value:this.state.head_title,className:"form-control",placeholder:"",onChange:function(t){return e.valueChange(t,"head_title")}})),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Text Color"),g.a.createElement("input",{type:"color",value:this.state.coming_soon_color,className:"form-control",placeholder:"",onChange:function(t){return e.valueChange(t,"coming_soon_color")}})),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Font Size"),g.a.createElement("input",{type:"number",value:this.state.coming_soon_size,className:"form-control",placeholder:"",onChange:function(t){return e.valueChange(t,"coming_soon_size")}})),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Text Font Family"),g.a.createElement("select",{value:this.state.coming_soon_font,className:"form-control",onChange:function(t){return e.valueChange(t,"coming_soon_font")}},this.state.fontList.map((function(e,t){return g.a.createElement("option",{key:t,value:e},e)})))),this.state.imageList.map((function(t,a){return g.a.createElement("div",{key:a,className:"border mb-2 pl-1 pr-1"},g.a.createElement("div",{className:"form-group mt-3"},a>1&&g.a.createElement("button",{className:"btn btn-danger float-right btn-xs",onClick:function(){e.removeImage("imageList",a)}},"x"),g.a.createElement("label",{className:"form-label"},"Select image"),g.a.createElement("input",{id:"upload",className:"form-control-file",ref:"upload",type:"file",accept:"image/*",onChange:function(t){return e.readFile("imageList",a,t)},onClick:function(e){return e.target.value=null}})),t.src&&g.a.createElement(b.a,{src:t.src,viewMode:1,guides:!1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,onInitialized:function(t){e.imageList_cropper[a]=t},ready:function(){e.onImageListChanged("imageList",a,e.imageList_cropper[a].getCroppedCanvas().toDataURL(),"croppedImageUrl"),e.imageList_cropper[a].getCroppedCanvas().toBlob((function(t){return e["blob_".concat("imageList")][a]=t}))},cropend:function(){e.onImageListChanged("imageList",a,e.imageList_cropper[a].getCroppedCanvas().toDataURL(),"croppedImageUrl"),e.imageList_cropper[a].getCroppedCanvas().toBlob((function(t){return e["blob_".concat("imageList")][a]=t}))}}),("basic"===e.state.page_type||"basic_plus"===e.state.page_type)&&g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label"},"Margin Top"),g.a.createElement("input",{type:"number",value:t.marginTop,className:"form-control",placeholder:"",onChange:function(t){e.onImageListChanged("imageList",a,t.target.value,"marginTop")}})))})),("basic_plus"===this.state.page_type||"coming_soon"===this.state.page_type)&&g.a.createElement("div",{className:"text-right"},g.a.createElement("button",{className:"btn",onClick:function(){e.addImage("imageList")}},"Add More"))),4===this.state.wizard_step&&g.a.createElement(g.a.Fragment,null,g.a.createElement("h4",null,"Footer"),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"About Title"),g.a.createElement("input",{type:"text",value:this.state.aboutText,className:"form-control",placeholder:"",onChange:function(t){return e.valueChange(t,"aboutText")}})),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"About Color"),g.a.createElement("input",{type:"color",value:this.state.footerTextColor,className:"form-control",placeholder:"",onChange:function(t){return e.valueChange(t,"footerTextColor")}})),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"About Description"),g.a.createElement("textarea",{type:"text",value:this.state.aboutDescription,className:"form-control",placeholder:"",onChange:function(t){return e.valueChange(t,"aboutDescription")}})),g.a.createElement("div",{className:"form-group mt-31"},g.a.createElement("label",{className:"form-label",htmlFor:"exampleRadios2"},"Button Link"),g.a.createElement("input",{type:"text",value:this.state.button_link,className:"form-control",placeholder:"",onChange:function(t){return e.valueChange(t,"button_link")}}))),g.a.createElement("div",{className:5===this.state.wizard_step?"":"hidden"},g.a.createElement("h4",null,"Widget"),g.a.createElement(E.a,{ref:this.widget_ref,updated:function(t){e.widget_blob_list=t.widget_blob_list,console.log("updated",t,e.widget_blob_list),e.setState({widgetHTML:t.html,widgetCSS:t.css,widgetJS:t.js,widgetExternel:t.externel_links})}})),this.state.wizard_step===w[this.state.page_type].max_wizard&&g.a.createElement(g.a.Fragment,null,g.a.createElement("h4",null,"Complete")),t>2&&g.a.createElement("button",{className:"btn btn-success mt-5 ",onClick:function(){e.setState({wizard_step:t-1})}},"Back"),this.state.wizard_step<w[this.state.page_type].max_wizard&&g.a.createElement("button",{className:"btn btn-primary mt-5 float-right",onClick:function(){e.setState({wizard_step:t+1})},disabled:2===this.state.wizard_step&&0===this.state.url.length},"Next"),this.state.wizard_step===w[this.state.page_type].max_wizard&&g.a.createElement(g.a.Fragment,null,g.a.createElement(h.d,{className:"mt-5 float-right",type:"submit",size:"sm",color:"primary",onClick:function(){e.onSave()}},g.a.createElement(f.a,{name:"cil-scrubber"})," Edit with HTML Builder",this.state.isLoading&&g.a.createElement("span",{className:"spinner-border spinner-border-sm ml-1",role:"status","aria-hidden":"true"}))))),g.a.createElement("div",{className:"col-8"},g.a.createElement("h4",{className:"text-center"},"Live Preview"),g.a.createElement("div",{className:"border",ref:this.ref},g.a.createElement("div",{style:{marginTop:"10px",marginBottom:"20px",fontSize:this.state.coming_soon_size+"px",fontWeight:400,color:this.state.coming_soon_color,textAlign:"center",fontFamily:this.state.coming_soon_font}},this.state.head_title),g.a.createElement("div",{style:{paddingRight:"20px",paddingLeft:"20px",textAlign:"center"}},g.a.createElement("img",{src:this.state.imageList[0].croppedImageUrl,alt:"slide 1",style:{height:"100%",maxWidth:"700px",width:"100%",margin:"auto"}})),g.a.createElement("div",{style:{textAlign:"center",paddingLeft:"20px",paddingRight:"20px"}},g.a.createElement("div",{style:{fontSize:"25px",marginTop:"80px"}},this.state.aboutText),g.a.createElement("p",{style:{maxWidth:"900px",margin:"auto",marginTop:"30px",fontSize:"40px"}},this.state.aboutDescription),g.a.createElement("div",{style:{marginTop:"30px"}},g.a.createElement("a",{className:"a-button",style:{marginBottom:"20px",width:"200px",background:"#fff",border:"#212840 1px solid",fontFamily:"'Yellowtail', serif, system-ui",textDecoration:"none",fontWeight:400,display:"inline-block",color:"#212840",height:"60px",lineHeight:"60px",fontSize:"30px"},href:this.state.button_link},"Latest News")))))))))}}]),a}(d.Component);t.default=C}}]);
//# sourceMappingURL=8.05cb7ffb.chunk.js.map