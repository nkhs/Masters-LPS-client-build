{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","views/admin/widgets/WidgetViewWhatsapp.js"],"names":["module","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","CONFIG","max_wizard","externel_links","WidgetViewWhatsapp","props","componentDidMount","initWhatsapp","Axios","get","state","title","r","data","v","options","JSON","parse","op","stringify","isLoading","setState","phone_number","history","location","pathname","split","slice","pop","wizard_step","whatsapp_title","whatsapp_popup_message","whatsapp_position","ref","React","createRef","javascript_ref","$","window","html","floatingWhatsApp","phone","headerTitle","popupMessage","showPopup","buttonImage","position","current","innerHTML","js","replace","post","css","console","log","goBack","catch","e","_save","column","target","className","htmlFor","type","placeholder","onChange","valueChange","onClick","disabled","size","color","onSave","name","role","aria-hidden","style","minHeight","id","display","Component"],"mappings":"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","file":"static/js/9.084f7824.chunk.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import React, { Component } from 'react'\r\n\r\nimport {\r\n    CButton,\r\n\r\n} from '@coreui/react'\r\n\r\nimport CIcon from '@coreui/icons-react'\r\nimport \"grapesjs/src/styles/scss/main.scss\";\r\nimport 'grapesjs/dist/css/grapes.min.css';\r\n\r\nimport Axios from '../../../lib/api';\r\n// import swal from 'sweetalert';\r\n// import './ss.css'\r\nimport './whatsapp.css'\r\n// import $ from 'jquery'\r\n\r\nvar CONFIG = {\r\n    'whatsapp': {\r\n        max_wizard: 2\r\n    },\r\n    'call button': {\r\n        max_wizard: 2\r\n    },\r\n    'coming_soon': {\r\n        max_wizard: 8\r\n    },\r\n\r\n}\r\n\r\nvar externel_links = [\r\n    '<script src=\"https://code.jquery.com/jquery-3.5.1.min.js\" integrity=\"sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=\" crossorigin=\"anonymous\"></script>',\r\n    '<link rel=\"stylesheet\" href=\"https://rawcdn.githack.com/rafaelbotazini/floating-whatsapp/3d18b26d5c7d430a1ab0b664f8ca6b69014aed68/floating-wpp.min.css\">',\r\n    '<script type=\"text/javascript\" src=\"https://rawcdn.githack.com/rafaelbotazini/floating-whatsapp/3d18b26d5c7d430a1ab0b664f8ca6b69014aed68/floating-wpp.min.js\"></script>'\r\n]\r\n\r\nclass WidgetViewWhatsapp extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            phone_number: '4418642583168',\r\n            title: props.history.location.pathname.split('/').slice(-1).pop(),\r\n\r\n            wizard_step: 2,\r\n            isLoading: false,\r\n\r\n            whatsapp_title: 'Chat with us on WhatsApp!',\r\n            whatsapp_popup_message: 'Hello, how can we help you?',\r\n            whatsapp_position: 'right'\r\n        }\r\n\r\n        this.ref = React.createRef();\r\n        this.javascript_ref = React.createRef();\r\n\r\n    }\r\n\r\n    initWhatsapp() {\r\n        var $ = window.$;\r\n        $('#WAButton').html('')\r\n        $('#WAButton').floatingWhatsApp({\r\n            phone: this.state.phone_number, //WhatsApp Business phone number International format-\r\n            //Get it with Toky at https://toky.co/en/features/whatsapp.\r\n            headerTitle: this.state.whatsapp_title, //Popup Title\r\n            popupMessage: this.state.whatsapp_popup_message, //Popup Message\r\n            showPopup: true, //Enables popup display\r\n            buttonImage: '<img src=\"https://rawcdn.githack.com/rafaelbotazini/floating-whatsapp/3d18b26d5c7d430a1ab0b664f8ca6b69014aed68/whatsapp.svg\" />',\r\n            //headerColor: 'crimson', //Custom header color\r\n            //backgroundColor: 'crimson', //Custom background button color\r\n            position: this.state.whatsapp_position\r\n        });\r\n    }\r\n\r\n    componentDidMount = () => {\r\n\r\n        this.initWhatsapp();\r\n\r\n        Axios.get(`admin/widget/widgets?title=${this.state.title}`).then(r => {\r\n            if (r && r.data && r.data[0]) {\r\n                var v = r.data[0]\r\n                if (typeof v.options === 'string') v.options = JSON.parse(v.options)\r\n                var op = JSON.parse(JSON.stringify(v.options))\r\n                delete v.options;\r\n                delete op.isLoading;\r\n                this.setState({ ...v, ...op, externel_links: externel_links });\r\n                this.initWhatsapp();\r\n            }\r\n        })\r\n    }\r\n\r\n    async _save() {\r\n\r\n        this.setState({ isLoading: true });\r\n\r\n        var html = this.ref.current.innerHTML;// `<div><div id=\"WAButton\" style={{ position: 'absolute' }}></div></div>`;\r\n        var js = this.javascript_ref.current.innerHTML;\r\n        js = js.replace('&lt;', '<');\r\n        js = js.replace('/&gt;', '/>');\r\n\r\n\r\n        Axios.post('admin/widget/add-widget', { title: this.state.title, html: html, css: '', js: js, externel_links: externel_links, options: this.state })\r\n            .then(r => {\r\n                console.log(r)\r\n                this.props.history.goBack();\r\n            })\r\n            .catch(e => console.error(e))\r\n    }\r\n\r\n    async onSave() {\r\n        this._save();\r\n    }\r\n\r\n    valueChange(e, column) {\r\n        this.setState({ [column]: e.target.value })\r\n    }\r\n\r\n    render() {\r\n        var { wizard_step } = this.state;\r\n\r\n        return (\r\n            <>\r\n                <div className=\"row\">\r\n                    <div className='col-4 border-right'>\r\n                        <div className=\"d-flex1 wizard\">\r\n                            {this.state.wizard_step === 2 && <>\r\n                                <h4>Whatsapp</h4>\r\n                                <div className=\"form-group mt-3\">\r\n                                    <label className=\"form-label\" htmlFor=\"exampleRadios2\">Phone Number</label>\r\n                                    <input type=\"text\" value={this.state.phone_number} className=\"form-control\" placeholder=\"phone number\" onChange={(e) => {\r\n                                        this.valueChange(e, 'phone_number');\r\n                                        this.initWhatsapp();\r\n                                    }} />\r\n                                </div>\r\n                                <div className=\"form-group mt-3\">\r\n                                    <label className=\"form-label\" htmlFor=\"exampleRadios2\">Title</label>\r\n                                    <input type=\"text\" value={this.state.whatsapp_title} className=\"form-control\" placeholder=\"Title\" onChange={(e) => {\r\n                                        this.valueChange(e, 'whatsapp_title');\r\n                                        this.initWhatsapp();\r\n                                    }} />\r\n                                </div>\r\n                                <div className=\"form-group mt-3\">\r\n                                    <label className=\"form-label\" htmlFor=\"exampleRadios2\">Popup Message</label>\r\n                                    <input type=\"text\" value={this.state.whatsapp_popup_message} className=\"form-control\" placeholder=\"Title\" onChange={(e) => {\r\n                                        this.valueChange(e, 'whatsapp_popup_message');\r\n                                        this.initWhatsapp();\r\n                                    }} />\r\n                                </div>\r\n                                <div className=\"form-group mt-31\">\r\n                                    <label className=\"form-label\" htmlFor=\"exampleRadios2\">Position</label>\r\n                                    <select value={this.state.whatsapp_position} className=\"form-control\" onChange={(e) => {\r\n                                        this.valueChange(e, 'whatsapp_position');\r\n                                        this.initWhatsapp();\r\n                                    }}>\r\n                                        <option value=\"left\">Left</option>\r\n                                        <option value=\"right\">Right</option>\r\n                                    </select>\r\n                                </div>\r\n                            </>\r\n                            }\r\n\r\n                            {this.state.wizard_step < CONFIG[this.state.title].max_wizard && <button className=\"btn btn-primary mt-5 float-right\" onClick={() => {\r\n                                this.setState({ wizard_step: wizard_step + 1 })\r\n                            }}\r\n                                disabled={this.state.wizard_step === 2}>Next</button>}\r\n\r\n                            {this.state.wizard_step === CONFIG[this.state.title].max_wizard &&\r\n                                <>\r\n                                    <CButton className=\"mt-5 float-right\" type=\"submit\" size=\"sm\" color=\"primary\" onClick={() => { this.onSave() }}><CIcon name=\"cil-scrubber\" />\r\n                                        Save{this.state.isLoading && <span className=\"spinner-border spinner-border-sm ml-1\" role=\"status\" aria-hidden=\"true\"></span>}\r\n                                    </CButton>\r\n                                </>\r\n                            }\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div className='col-8'>\r\n                        <h4 className=\"text-center\">Live Preview</h4>\r\n                        <div className=\"border pb-5\" ref={this.ref} style={{ minHeight: '300px' }}>\r\n\r\n                            <div id=\"WAButton\"></div>\r\n\r\n                        </div>\r\n\r\n                        {/* Used for save javascript */}\r\n                        <pre ref={this.javascript_ref} style={{ display: 'none' }}>\r\n                            {\r\n                                `\r\n                                    $('#WAButton').html('')\r\n                                    $('#WAButton').floatingWhatsApp({\r\n                                        phone: \"${this.state.phone_number}\",\r\n                                        headerTitle: \"${this.state.whatsapp_title}\",\r\n                                        popupMessage: \"${this.state.whatsapp_popup_message}\",\r\n                                        showPopup: true,\r\n                                        buttonImage: '<img src=\"https://rawcdn.githack.com/rafaelbotazini/floating-whatsapp/3d18b26d5c7d430a1ab0b664f8ca6b69014aed68/whatsapp.svg\" />',\r\n                                        //headerColor: 'crimson', //Custom header color\r\n                                        //backgroundColor: 'crimson', //Custom background button color\r\n                                        position: \"${this.state.whatsapp_position}\"\r\n                                    });\r\n                                    `\r\n                            }\r\n                        </pre>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default WidgetViewWhatsapp\r\n"],"sourceRoot":""}